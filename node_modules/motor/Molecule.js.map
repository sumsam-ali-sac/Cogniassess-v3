{"version":3,"sources":["src/Molecule.js"],"names":[],"mappings":"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","file":"Molecule.js","sourcesContent":["/*\n * LICENSE\n *\n * This Source Code Form is subject to the terms of the Mozilla Public\n * License, v. 2.0. If a copy of the MPL was not distributed with this\n * file, You can obtain one at http://mozilla.org/MPL/2.0/.\n *\n */\n\nimport Modifier from 'famous/core/Modifier';\nimport RenderNode from 'famous/core/RenderNode';\nimport TransitionableTransform from 'famous/transitions/TransitionableTransform';\nimport EventHandler from 'famous/core/EventHandler';\n\nimport {simpleExtend} from './utils'\n\nimport \"army-knife/polyfill.Function.name\";\n\n/**\n * Molecules are the basic building blocks of all UI components. Molecules\n * extend [famous/core/RenderNode](#famous/core/RenderNode), so they can be\n * added to any `RenderNode` of a famo.us render tree, and by default they will\n * also accept anything that a normal Famo.us `RenderNode` can accept via the\n * `add` method.  Classes that extend from `Molecule` might override\n * `RenderNode.add` in order to accept things like arrays of renderables in\n * stead of a single renderable.\n *\n * Molecules encapsulate the basic things you need for a component -- a\n * [famous/transitions/TransitionableTransform](#famous/transitions/TransitionableTransform)\n * for positioning things in space, and a [famous/core/EventHandler](#famous/core/EventHandler)\n * for capturing user interaction -- exposing a unified API for working with these\n * things. For now, [famous/core/Modifier](#famous/core/Modifier) is used as the interface\n * for applying transforms and sizing, but this will change in Mixed Mode\n * Famo.us.\n *\n * All components extend Molecule, but at the same time they can also use any\n * number of Molecules internally to do nice things like create layouts and\n * position multiple things in space.\n *\n * @class Molecule\n * @extends {module: famous/core/RenderNode}\n */\nexport class Molecule extends RenderNode {\n\n    /**\n     * Creates a new `Molecule` and applies `initialOptions` to it's internal\n     * `famous/core/Modifier`. See [famous/core/Modifier](#famous/core/Modifier)\n     * for details on what options you can pass.\n     *\n     * Note: Mixed Mode Famo.us does away with Modifiers, so this API will\n     * change slightly, but the change will be in such a way that APIs of\n     * higher level classes won't change because of this. One of the biggest\n     * changes in Mixed Mode will be that `size` will be set only on a\n     * per-Surface basis as far as a render tree is concerned. So if you\n     * normally put multiple `Surface` instances into a `Modifier` that has a\n     * size, then instead you'll have to explicitly assign a `size` to each\n     * `Surface`. This is a good thing, and makes for a cleaner and easier to\n     * use render tree with a separation of concerns from classes that can\n     * handle boundaries and group sizing. `Molecule` might then be an example\n     * of such a class with it's own size API.\n     *\n     * @constructor\n     * @param {Object} initialOptions The options to initialize this Molecule's `Modifier` with.\n     */\n    constructor(initialOptions) {\n        super(RenderNode)\n\n        // \"private\" stuff. Not really, but regard it like so. For example, if\n        // you see something like obj._.someVariable then you're accessing\n        // internal stuff that wasn't designed to be accessed directly, and any\n        // problem you enounter with that is your own problem. :)\n        //\n        // TODO: Use a WeakMap to store these at some point.\n        this._ = {\n            options: {}, // set and get with this.options\n            defaultOptions: {}\n        }\n\n        // Add default values for this Molecule\n        // TODO: Make default options static for the class.\n        simpleExtend(this._.defaultOptions, {\n            align: [0.5,0.5],\n            origin: [0.5,0.5],\n            transform: new TransitionableTransform,\n            handler: new EventHandler\n        })\n\n        // set the user's initial options. This automatically creates\n        // this.modifier, and adds it to this (don't forget, *this* is a\n        // RenderNode, so a Molecule can add things to itself).\n        //\n        // NOTE: this.options is a setter property. This statement applies all\n        // relevant properties to this.modifier.\n        this.options = initialOptions;\n    }\n\n    /**\n     * @property {Object} options The Molecule's options, which get applied to\n     * `this.modifier`. This may change with Mixed Mode. Setting this property\n     * overrides existing options. To extend existing options with new options,\n     * use `setOptions` instead.  Unspecified options will be set to their default\n     * values.\n     *\n     * Note: Anytime `this.options` is assigned a new value, `this.modifier` is set\n     * to a new [famous/core/Modifier](#famous/core/Modifier).\n     */\n    set options(newOptions) {\n        this.resetOptions();\n        this.setOptions(newOptions);\n    }\n    get options() {\n        return this._.options;\n    }\n\n    /**\n     * @property {module: famous/transitions/TransitionableTransform} transform\n     * The transform of this `Molecule`. The default is a\n     * [famous/transitions/TransitionableTransform](#famous/transitions/TransitionableTransform).\n     * Setting this property automatically puts the new transform into effect.\n     * See [famous/core/Modifier.transformFrom](#famous/core/Modifier.transformFrom).\n     */\n    set transform(newTransform) {\n        this.setOptions({transform: newTransform});\n    }\n    get transform() {\n        return this.options.transform;\n    }\n\n    /**\n     * Compounds `newOptions` into the existing options, similar to extending an\n     * object and overriding only the desired properties. To override all\n     * options with a set of new options, set `this.options` directly.\n     *\n     * An example of setting just a single option without erasing other options:\n     *\n     * ```js\n     * var myMolecule = new Molecule()\n     * myMolecule.setOptions({\n     *   align: [0.2, 0.8]\n     * })\n     * ```\n     *\n     * @param {Object} newOptions An object containing the new options to apply to this `Molecule`.\n     */\n    setOptions(newOptions) {\n        if (typeof newOptions == 'undefined' || newOptions.constructor.name != \"Object\")\n            newOptions = {}\n\n        for (var prop in newOptions) {\n            // Subject to change when Famo.us API changes.\n            if (Modifier.prototype[''+prop+'From']) {\n                this.modifier[''+prop+'From'](newOptions[prop]);\n            }\n\n            this._.options[prop] = newOptions[prop];\n        }\n    }\n\n    /**\n     * Sets all options back to their defaults.\n     *\n     * Note: Anytime this is called, `this.modifier` is set to a new\n     * [famous/core/Modifier](#famous/core/Modifier) having the default\n     * options.\n     */\n    resetOptions() {\n        this.modifier = new Modifier();\n        this.set(this.modifier);\n        this.setOptions(this._.defaultOptions);\n    }\n\n    /**\n     * Forwards events from this Molecule's [famous/core/EventHandler](#famous/core/EventHandler) to the given\n     * target, which can be another `EventHandler` or `Molecule`.\n     *\n     * This method is equivalent to [famous/core/EventHandler.pipe](#famous/core/EventHandler.pipe),\n     * acting upon `this.handler`.\n     *\n     * TODO v0.1.0: Let this method accept a `Molecule`, then stop doing `pipe(this._.handler)` in other places\n     */\n    pipe() {\n        var args = Array.prototype.splice.call(arguments, 0);\n        return this.options.handler.pipe.apply(this.options.handler, args);\n    }\n\n    /**\n     * Stops events from this Molecule's [famous/core/EventHandler](#famous/core/EventHandler)\n     * from being sent to the given target.\n     *\n     * This method is equivalent to [famous/core/EventHandler.unpipe](#famous/core/EventHandler.unpipe),\n     * acting upon `this.handler`.\n     *\n     * TODO v0.1.0: Let this method accept a `Molecule`, then stop doing `pipe(this.options.handler)` in other places\n     */\n    unpipe() {\n        var args = Array.prototype.splice.call(arguments, 0);\n        return this.options.handler.unpipe.apply(this.options.handler, args);\n    }\n\n    /**\n     * Register an event handler for the specified event.\n     * See [famous/core/EventHandler.on](#famous/core/EventHandler.on).\n     */\n    on() {\n        var args = Array.prototype.splice.call(arguments, 0);\n        return this.options.handler.on.apply(this.options.handler, args);\n    }\n\n    /**\n     * Unregister an event handler for the specified event.\n     * See [famous/core/EventHandler.off](#famous/core/EventHandler.off).\n     */\n    off() {\n        var args = Array.prototype.splice.call(arguments, 0);\n        return this.options.handler.on.apply(this.options.handler, args);\n    }\n}\nexport default Molecule;\n"]}